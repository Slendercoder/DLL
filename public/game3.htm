<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
    box-sizing: border-box;
}

/* Create three unequal columns that floats next to each other */
.column {
    float: left;
    padding: 10px;
}

.left, .right {
  width: 25%;
}

.middle {
  width: 48%;
}

/* Clear floats after the columns */
.row:after {
    content: "";
    display: table;
    clear: both;
}

.button1{
    background-color: #e7e7e7;
    color: black;
    border: none;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

button {
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  outline: 0;
  -webkit-appearance: none;
}

/* Custom */
button {
  display: inline-block;
  position: relative;
  padding: 20px 38px;
  top: 0;
  font-size: 20px;
  font-family: "Open Sans", Helvetica;
  border-radius: 4px;
  border-bottom: 1px solid rgba( 28, 227, 125, 0.5 );
  background: rgba( 22, 230, 137, 1 );
  color: #fff;
  box-shadow: 0px 0px 0px rgba( 15, 165, 60, 0.1 );

  -webkit-transform: translateZ(0);
     -moz-transform: translateZ(0);
      -ms-transform: translateZ(0);
          transform: translateZ(0);

  -webkit-transition: all 0.2s ease;
     -moz-transition: all 0.2s ease;
      -ms-transition: all 0.2s ease;
          transition: all 0.2s ease;
}

button:hover {
  top: -10px;
  box-shadow: 0px 10px 10px rgba( 15, 165, 60, 0.2 );

  -webkit-transform: rotateX(20deg);
     -moz-transform: rotateX(20deg);
      -ms-transform: rotateX(20deg);
          transform: rotateX(20deg);
}

button:active {
  top: 0px;
  box-shadow: 0px 0px 0px rgba( 15, 165, 60, 0.0 );
  background: rgba( 20, 224, 133, 1 );
}

.droptarget {
    float: left;
    width: 100px;
    height: 80px;
    margin: 15px;
    padding: 10px;
    border: 1px solid #aaaaaa;
}

/* Propiedades de la ventana para seleccionar objetos del toolbox */
.objetos {
    display: none; /* Hidden by default */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    position: fixed; /* Stay in place */
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 35%;
    overflow: auto;
}


/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 40%;
}
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
.centered {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-55%, -200%);
}

/* -------------------- Select Box Styles: stackoverflow.com Method */
/* -------------------- Source: http://stackoverflow.com/a/5809186 */
select#soflow, select#soflow-color {
   -webkit-appearance: button;
   -webkit-border-radius: 2px;
   -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
   -webkit-padding-end: 20px;
   -webkit-padding-start: 2px;
   -webkit-user-select: none;
   background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);
   background-position: 97% center;
   background-repeat: no-repeat;
   border: 1px solid #AAA;
   color: #555;
   font-size: inherit;
   margin: 20px;
   overflow: hidden;
   padding: 5px 10px;
   text-overflow: ellipsis;
   white-space: nowrap;
   width: 300px;
}

select#soflow-color {
   color: #fff;
   background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#779126, #779126 40%, #779126);
   background-color: #779126;
   -webkit-border-radius: 20px;
   -moz-border-radius: 20px;
   border-radius: 20px;
   padding-left: 15px;
}

div.gallery{
  float: left;
}

div.gallery:hover {
    border: 1px solid #777;
    width: 114px;
    height: 114px;
}

div.gallery1:hover {
    border: 1px solid #777;
}

img.ovalar{
    border-radius: 10%;
}
    
.Enviar{
    display: "";
    draggable: false;
    width: 110px; 
    height: 110px;
}

.Recibido{
    display: none;
    draggable: true;
    width: 110px; 
    height: 110px;    
}

.Propio{
    display: "";
    draggable: true;
    width: 110px; 
    height: 110px;    
}

</style>
</head>
<body>

<!--
<h1 align="center">Vista Principal</h1>
-->

<div class="row">
  <div class="column left" style="">

    <h3>Click sobre toolbock para ver sus objetos:</h3>

    <div class="gallery1">
        <img id="toolbox" draggable="false" src="Images/tool-box.png" alt="" width="200" height=auto/>
    </div>

    <h3>Click sobre caja para ver objetos recibidos:</h3>

    <div class="gallery1">
        <img id="caja" draggable="false" src="Images/caja.png" alt="" width="200" height=auto/>
    </div>

    <div class="objetos" id="objetosPropios">

      <h3 align="center">
          Objetos Propios
      </h3>

      <p>
          En esta ventana puede ver sus objetos. Entre estos objetos están los 
          <span id="rotuloExperto">"Xol"</span>, que son los cuadrados 
          <span id="tipoPoligono">blancos</span>, cuyas rayas son de color
          <span id="colorRayas">rojo</span>, y tienen
          un número <span id="paridadHorizontales">par</span> de rayas horizontales 
          y un número <span id="paridadVerticales">par</span> de rayas verticales.
          <br>
          <br>
      </p>

        <div class="gallery">
            <img id="drag1" src="Images/objeto1.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag2" src="Images/objeto2.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag3" src="Images/objeto3.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag4" src="Images/objeto4.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag5" src="Images/objeto5.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag6" src="Images/objeto6.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag7" src="Images/objeto7.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag8" src="Images/objeto8.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag9" src="Images/objeto9.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag10" src="Images/objeto10.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag11" src="Images/objeto11.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag12" src="Images/objeto12.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag13" src="Images/objeto13.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag14" src="Images/objeto14.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag15" src="Images/objeto15.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag16" src="Images/objeto16.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag17" src="Images/objeto17.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag18" src="Images/objeto18.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag19" src="Images/objeto19.png" class="Propio"/>
        </div>
        <div class="gallery">
            <img id="drag20" src="Images/objeto20.png" class="Propio"/>
        </div>

        <DIV style="clear:both;" align="center">
          <br>
          Dar dobleclick sobre el objeto para marcarlo
          (dar click para quitar la marca).
          <br>
          <br>
          <br>

          <!--boton de salida-->
          <button class="button1" id='exitButton1'>Salir</button>
        </DIV>
    </div> <!--Cierra div de los objetos propios-->

    <div class="objetos" id="objetosRecibidos">

      <h3 align="center">
          Objetos Recibidos
      </h3>

      <p>
          En esta ventana puede ver los objetos que le ha enviado
          su compañero.
          <br>
          <br>
      </p>

        <div class="gallery">
            <img id="drag1-Recibido" src="Images/objeto1.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag2-Recibido" src="Images/objeto2.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag3-Recibido" src="Images/objeto3.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag4-Recibido" src="Images/objeto4.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag5-Recibido" src="Images/objeto5.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag6-Recibido" src="Images/objeto6.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag7-Recibido" src="Images/objeto7.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag8-Recibido" src="Images/objeto8.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag9-Recibido" src="Images/objeto9.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag10-Recibido" src="Images/objeto10.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag11-Recibido" src="Images/objeto11.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag12-Recibido" src="Images/objeto12.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag13-Recibido" src="Images/objeto13.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag14-Recibido" src="Images/objeto14.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag15-Recibido" src="Images/objeto15.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag16-Recibido" src="Images/objeto16.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag17-Recibido" src="Images/objeto17.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag18-Recibido" src="Images/objeto18.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag19-Recibido" src="Images/objeto19.png" class="Recibido"/>
        </div>
        <div class="gallery">
            <img id="drag20-Recibido" src="Images/objeto20.png" class="Recibido" />
        </div>
        <DIV style="clear:both;" align="center">
          <br>
          Dar dobleclick sobre el objeto para marcarlo
          (dar click para quitar la marca).
          <br>
          <br>
          <br>

          <!--boton de salida-->
          <button class="button1" id='exitButton2'>Salir</button>
        </DIV>
    </div> <!--Cierra div de los objetos recibidos-->


  </div> <!--Cierra div de la columna izquierda-->

  <div class="column middle" style="">
    <h2 align="center">Su puntaje es: <span style="font-size:24pt" id="Puntaje">0 </span> puntos</h2>

    <table style="width:90%">
      <tr>
        <th rowspan="2" >
            <img class="ovalar" src="Images/gears.jpg" draggable="false" align="right" width="200" height="170" alt=""/>
        </th>
        <th align="center" style="width:80%">Arrastre objetos aquí<br> para formar una pareja</th>
      </tr>
      <tr>
        <td>
            <DIV align="center">
              <!--Casillas para arrastrar los objetos-->
                    <div class="droptarget" id = "Izquierdo">
                      <img id="dropIzq" style="display: none;" draggable="false" src="" width="60" height="60"/>
                    </div>

                    <div class="droptarget" id = "Derecho">
                      <img id="dropDer" style="display: none;" draggable="false" src="" width="60" height="60"/>
                    </div>
            </DIV>
          </td>
      </tr>
      <tr>
        <td colspan="2" align="center">
            <br>
            <br>
            <br>
            <button type="button" id="botonVerde">Ingresar pareja a la máquina</button>
        </td>
      </tr>
    </table>

    </div> <!--Cierra div de la columna de en medio-->

  <div class="column right" style="">
    <h2>Hablar con el compañero:</h2>
    <p>Presione el botón para enviar un mensaje a su compañero:</p>
          <button type="button" id='myBtn'>Enviar mensaje</button>

      <h2>Mensajes recibidos:</h2>
      <p>Seleccione aquí el mensaje que desea ver:</p>
        <select id=soflow-color>
          <option>Sus mensajes recibidos aquí</option>
        </select>

      <br>
      <br>
      <br>
      <br>

    <div style="float:right">
        <button class="button1" id="finRonda">Finalizar ronda</button>
    </div>


  </div> <!--Cierra div de la columna derecha-->

</div>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <h2>Le han mandado el siguiente mensaje: <span id='Mensaje'></span></h2>
    <HR>
    <h3>Escoja el objeto a enviar:</h3>
        <div >
            <img type="button" class="Enviar" id="drag1-Enviar" src="Images/objeto1.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag2-Enviar" src="Images/objeto2.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag3-Enviar" src="Images/objeto3.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag4-Enviar" src="Images/objeto4.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag5-Enviar" src="Images/objeto5.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag6-Enviar" src="Images/objeto6.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag7-Enviar" src="Images/objeto7.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag8-Enviar" src="Images/objeto8.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag9-Enviar" src="Images/objeto9.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag10-Enviar" src="Images/objeto10.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag11-Enviar" src="Images/objeto11.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag12-Enviar" src="Images/objeto12.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag13-Enviar" src="Images/objeto13.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag14-Enviar" src="Images/objeto14.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag15-Enviar" src="Images/objeto5.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag16-Enviar" src="Images/objeto16.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag17-Enviar" src="Images/objeto17.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag18-Enviar" src="Images/objeto18.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag19-Enviar" src="Images/objeto19.png"/>
        </div>
        <div >
            <img type="button" class="Enviar" id="drag20-Enviar" src="Images/objeto20.png"/>
        </div>
        <div >
            <img type="button" class="" id="botIgn" draggable="false" src="Images/IgnoreButton.png" width="80" height="80"/>
        </div>
  </div>

</div>

<!-- The Modal -->
<div id="myModal2" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
        <div>
          <h2>Escoja su mensaje:</font></h2>
        </div>

            <DIV id = 'Zab' visibility:"visible" z-index:"1">
              <!--imagen del boton ZAB-->
              <button type="button" id='ARRIBAbutton'><span id='arriba'></span></button>
              <br>
              <br>
            </DIV>

            <DIV id = 'Xol' visibility:"visible" z-index:"1">
              <!--imagen del boton XOL-->
              <button type="button" id='MEDIObutton'><span id='medio'></span></button>
              <br>
              <br>
            </DIV>

            <DIV id = 'Dup' visibility:"visible" z-index:"1">
              <!--imagen del boton DUP-->
                <button type="button" id='ABAJObutton'><span id='abajo'></span></button>
            </DIV>

            <div>
                <b><h1 face="arial" aling = "top" ><H4>(Observe que las palabras aparecen de forma aleatoria)</H4></h1></b>
            </div>

            <DIV align="center">
              <!--boton de salida-->
              <button class="button1" id='exitButton'>Salir</button>
            </DIV>


    </div>
</div>

</body>
</html>

<script>
      var node = parent.node;

      /* Events fired on the drag target */
      document.addEventListener("dragstart", function(event) {
          // The dataTransfer.setData() method sets the data type and the value of the dragged data
          event.dataTransfer.setData("Text", event.target.id);

          // Change the opacity of the draggable element
          // event.target.style.opacity = "0.4";
      });

      /* Events fired on the drop target */

      // When the draggable p element enters the droptarget, change the DIVS's border style
      document.addEventListener("dragenter", function(event) {
          if ( event.target.className == "droptarget" ) {
              event.target.style.border = "3px dotted red";
          }
      });

      // By default, data/elements cannot be dropped in other elements. To allow a drop, we must prevent the default handling of the element
      document.addEventListener("dragover", function(event) {
          event.preventDefault();
      });

      // When the draggable p element leaves the droptarget, reset the DIVS's border style
      document.addEventListener("dragleave", function(event) {
          if ( event.target.className == "droptarget" ) {
              event.target.style.border = "";
          }
      });

      document.addEventListener("drop", function(event) {
          event.preventDefault();
          if (event.target.className == "droptarget" ) {
              event.target.style.border = "";
              var data = event.dataTransfer.getData("Text");
              console.log('Se enviaron datos', data);
              console.log('Se arrastro en el', event.target.id);
              node.emit('Arrastrar', [data, event.target.id]);
          }
      });

      document.addEventListener("click", function(event) {
          event.preventDefault();
          if (event.target.className == "Enviar" ) {
              var mensaje_enviar = event.target.id;
              var mensaje = mensaje_enviar.substring(0, mensaje_enviar.length - 7);
              console.log('Se va a enviar el', mensaje);
              node.emit('Respuesta', [mensaje, mensaje_enviar]);
          }

          if (event.target.className == "Recibido" || event.target.className == "Propio") {
              event.target.style.border = "";
              event.target.style.width = "114px";
              event.target.style.height = "114px";
          }
});

      document.addEventListener("dblclick", function(event) {
          event.preventDefault();
          if (event.target.className == "Recibido" || event.target.className == "Propio") {
              event.target.style.border = "1px solid red";
              event.target.style.width = "112px";
              event.target.style.height = "112px";
          }
      });
    
</script>
